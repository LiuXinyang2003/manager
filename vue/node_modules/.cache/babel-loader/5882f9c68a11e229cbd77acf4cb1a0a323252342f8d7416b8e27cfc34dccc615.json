{"ast":null,"code":"export default {\n  name: \"StudentPerson\",\n  data() {\n    return {\n      tableData: [],\n      params: {\n        name: '',\n        total: 0,\n        pageNum: 1,\n        // 当前的页码\n        pageSize: 10 // 每页显示的个数\n      },\n\n      user: JSON.parse(localStorage.getItem('xm-user') || '{}')\n    };\n  },\n  created() {},\n  mounted() {\n    console.log(this.user);\n    console.log(JSON.stringify(this.user));\n    console.log(JSON.parse(JSON.stringify(this.user)));\n    console.log(this.user.token);\n    // this.show()\n  },\n\n  methods: {\n    load(pageNum) {\n      // 分页查询\n      if (pageNum) this.params.pageNum = pageNum;\n      this.$request.get('/student/selectPage', {\n        params: this.params\n      }).then(res => {\n        console.log(res.data);\n        this.tableData = res.data?.list;\n        console.log(this.tableData);\n        this.total = res.data?.total;\n      });\n    },\n    update() {\n      // 保存当前的用户信息到数据库\n      this.$request.put('/student/update', this.user).then(res => {\n        if (res.code === '200') {\n          // 成功更新\n          this.$message.success('保存成功');\n\n          // 更新浏览器缓存里的用户信息\n          localStorage.setItem('xm-user', JSON.stringify(this.user));\n\n          // 触发父级的数据更新\n          this.$emit('update:user');\n        } else {\n          this.$message.error(res.msg);\n        }\n      });\n    },\n    show() {\n      this.$request.get('/student/selectAdd', {\n        params: {\n          name: this.user.name\n        }\n      }).then(res => {\n        console.log(JSON.parse(JSON.stringify(this.user)));\n        Object.keys(res.data).forEach(key => {\n          // 如果user对象中有这个属性，就更新它\n          if (this.user.hasOwnProperty(key)) {\n            this.user[key] = res.data[key];\n          }\n        });\n        console.log(this.user);\n      });\n    },\n    handleAvatarSuccess(response, file, fileList) {\n      // 把user的头像属性换成上传的图片的链接\n      this.$set(this.user, 'avatar', response.data);\n    }\n  }\n};","map":{"version":3,"names":["name","data","tableData","params","total","pageNum","pageSize","user","JSON","parse","localStorage","getItem","created","mounted","console","log","stringify","token","methods","load","$request","get","then","res","list","update","put","code","$message","success","setItem","$emit","error","msg","show","Object","keys","forEach","key","hasOwnProperty","handleAvatarSuccess","response","file","fileList","$set"],"sources":["src/views/manager/StudentPerson.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <el-card style=\"width: 50%\">\r\n      <el-form :model=\"user\" label-width=\"100px\" style=\"padding-right: 50px\">\r\n        <div style=\"margin: 15px; text-align: center\">\r\n          <el-upload\r\n              class=\"avatar-uploader\"\r\n              :action=\"$baseUrl + '/files/upload'\"\r\n              :show-file-list=\"false\"\r\n              :on-success=\"handleAvatarSuccess\"\r\n          >\r\n            <img v-if=\"user.avatar\" :src=\"user.avatar\" class=\"avatar\" />\r\n            <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n          </el-upload>\r\n        </div>\r\n        <el-form-item label=\"用户名\" prop=\"username\">\r\n          <el-input v-model=\"user.username\" placeholder=\"用户名\" ></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"姓名\" prop=\"name\">\r\n          <el-input v-model=\"user.name\" placeholder=\"姓名\" disabled=\"\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"学院\" prop=\"name\">\r\n          <el-input v-model=\"user.collegeName\" disabled=\"\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"专业\" prop=\"name\">\r\n          <el-input v-model=\"user.specialityName\" disabled=\"\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"班级\" prop=\"name\">\r\n          <el-input v-model=\"user.className\" disabled=\"\"></el-input>\r\n        </el-form-item>\r\n        <div style=\"text-align: center; margin-bottom: 20px\">\r\n          <el-button type=\"primary\" @click=\"update\">保 存</el-button>\r\n        </div>\r\n      </el-form>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"StudentPerson\",\r\n  data() {\r\n    return {\r\n      tableData: [],\r\n      params:{\r\n        name: '',\r\n        total:0,\r\n        pageNum: 1,   // 当前的页码\r\n        pageSize: 10,  // 每页显示的个数\r\n      },\r\n      user: JSON.parse(localStorage.getItem('xm-user') || '{}')\r\n    }\r\n  },\r\n  created() {\r\n\r\n  },\r\n  mounted() {\r\n    console.log(this.user)\r\n    console.log(JSON.stringify(this.user))\r\n    console.log(JSON.parse(JSON.stringify(this.user)))\r\n    console.log(this.user.token)\r\n    // this.show()\r\n  },\r\n  methods: {\r\n    load(pageNum) {  // 分页查询\r\n      if (pageNum) this.params.pageNum = pageNum\r\n      this.$request.get('/student/selectPage', {\r\n        params: this.params\r\n      }).then(res => {\r\n        console.log(res.data)\r\n        this.tableData = res.data?.list\r\n        console.log(this.tableData)\r\n        this.total = res.data?.total\r\n      })\r\n    },\r\n    update() {\r\n      // 保存当前的用户信息到数据库\r\n      this.$request.put('/student/update', this.user).then(res => {\r\n        if (res.code === '200') {\r\n          // 成功更新\r\n          this.$message.success('保存成功')\r\n\r\n          // 更新浏览器缓存里的用户信息\r\n          localStorage.setItem('xm-user', JSON.stringify(this.user))\r\n\r\n          // 触发父级的数据更新\r\n          this.$emit('update:user')\r\n        } else {\r\n          this.$message.error(res.msg)\r\n        }\r\n      })\r\n    },\r\n\r\n    show(){\r\n      this.$request.get('/student/selectAdd',{\r\n        params: {name:this.user.name}\r\n      }).then(res =>{\r\n        console.log(JSON.parse(JSON.stringify(this.user)))\r\n        Object.keys(res.data).forEach(key => {\r\n          // 如果user对象中有这个属性，就更新它\r\n          if (this.user.hasOwnProperty(key)) {\r\n            this.user[key] = res.data[key];\r\n          }\r\n        });\r\n        console.log(this.user)\r\n      })\r\n    },\r\n    handleAvatarSuccess(response, file, fileList) {\r\n      // 把user的头像属性换成上传的图片的链接\r\n      this.$set(this.user, 'avatar', response.data)\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n/deep/.el-form-item__label {\r\n  font-weight: bold;\r\n}\r\n/deep/.el-upload {\r\n  border-radius: 50%;\r\n}\r\n/deep/.avatar-uploader .el-upload {\r\n  border: 1px dashed #d9d9d9;\r\n  cursor: pointer;\r\n  position: relative;\r\n  overflow: hidden;\r\n  border-radius: 50%;\r\n}\r\n/deep/.avatar-uploader .el-upload:hover {\r\n  border-color: #409EFF;\r\n}\r\n.avatar-uploader-icon {\r\n  font-size: 28px;\r\n  color: #8c939d;\r\n  width: 120px;\r\n  height: 120px;\r\n  line-height: 120px;\r\n  text-align: center;\r\n  border-radius: 50%;\r\n}\r\n.avatar {\r\n  width: 120px;\r\n  height: 120px;\r\n  display: block;\r\n  border-radius: 50%;\r\n}\r\n</style>"],"mappings":"AAuCA;EACAA,IAAA;EACAC,KAAA;IACA;MACAC,SAAA;MACAC,MAAA;QACAH,IAAA;QACAI,KAAA;QACAC,OAAA;QAAA;QACAC,QAAA;MACA;;MACAC,IAAA,EAAAC,IAAA,CAAAC,KAAA,CAAAC,YAAA,CAAAC,OAAA;IACA;EACA;EACAC,QAAA,GAEA;EACAC,QAAA;IACAC,OAAA,CAAAC,GAAA,MAAAR,IAAA;IACAO,OAAA,CAAAC,GAAA,CAAAP,IAAA,CAAAQ,SAAA,MAAAT,IAAA;IACAO,OAAA,CAAAC,GAAA,CAAAP,IAAA,CAAAC,KAAA,CAAAD,IAAA,CAAAQ,SAAA,MAAAT,IAAA;IACAO,OAAA,CAAAC,GAAA,MAAAR,IAAA,CAAAU,KAAA;IACA;EACA;;EACAC,OAAA;IACAC,KAAAd,OAAA;MAAA;MACA,IAAAA,OAAA,OAAAF,MAAA,CAAAE,OAAA,GAAAA,OAAA;MACA,KAAAe,QAAA,CAAAC,GAAA;QACAlB,MAAA,OAAAA;MACA,GAAAmB,IAAA,CAAAC,GAAA;QACAT,OAAA,CAAAC,GAAA,CAAAQ,GAAA,CAAAtB,IAAA;QACA,KAAAC,SAAA,GAAAqB,GAAA,CAAAtB,IAAA,EAAAuB,IAAA;QACAV,OAAA,CAAAC,GAAA,MAAAb,SAAA;QACA,KAAAE,KAAA,GAAAmB,GAAA,CAAAtB,IAAA,EAAAG,KAAA;MACA;IACA;IACAqB,OAAA;MACA;MACA,KAAAL,QAAA,CAAAM,GAAA,yBAAAnB,IAAA,EAAAe,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAI,IAAA;UACA;UACA,KAAAC,QAAA,CAAAC,OAAA;;UAEA;UACAnB,YAAA,CAAAoB,OAAA,YAAAtB,IAAA,CAAAQ,SAAA,MAAAT,IAAA;;UAEA;UACA,KAAAwB,KAAA;QACA;UACA,KAAAH,QAAA,CAAAI,KAAA,CAAAT,GAAA,CAAAU,GAAA;QACA;MACA;IACA;IAEAC,KAAA;MACA,KAAAd,QAAA,CAAAC,GAAA;QACAlB,MAAA;UAAAH,IAAA,OAAAO,IAAA,CAAAP;QAAA;MACA,GAAAsB,IAAA,CAAAC,GAAA;QACAT,OAAA,CAAAC,GAAA,CAAAP,IAAA,CAAAC,KAAA,CAAAD,IAAA,CAAAQ,SAAA,MAAAT,IAAA;QACA4B,MAAA,CAAAC,IAAA,CAAAb,GAAA,CAAAtB,IAAA,EAAAoC,OAAA,CAAAC,GAAA;UACA;UACA,SAAA/B,IAAA,CAAAgC,cAAA,CAAAD,GAAA;YACA,KAAA/B,IAAA,CAAA+B,GAAA,IAAAf,GAAA,CAAAtB,IAAA,CAAAqC,GAAA;UACA;QACA;QACAxB,OAAA,CAAAC,GAAA,MAAAR,IAAA;MACA;IACA;IACAiC,oBAAAC,QAAA,EAAAC,IAAA,EAAAC,QAAA;MACA;MACA,KAAAC,IAAA,MAAArC,IAAA,YAAAkC,QAAA,CAAAxC,IAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}